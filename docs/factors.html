<!DOCTYPE html>
<html lang="en" xml:lang="en">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Module 10 Factors | Readings for MTH250 - Data Wrangling</title>
  <meta name="description" content="This book contains the readings for MTH250W at Northland College." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Module 10 Factors | Readings for MTH250 - Data Wrangling" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://derekogle.com/BookWrangling/" />
  
  <meta property="og:description" content="This book contains the readings for MTH250W at Northland College." />
  <meta name="github-repo" content="droglenc/BookWrangling" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Module 10 Factors | Readings for MTH250 - Data Wrangling" />
  
  <meta name="twitter:description" content="This book contains the readings for MTH250W at Northland College." />
  

<meta name="author" content="Derek H. Ogle" />


<meta name="date" content="2021-08-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dates-and-times.html"/>
<link rel="next" href="strings.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Readings for Data Wrangling in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="preparation.html"><a href="preparation.html"><i class="fa fa-check"></i><b>1</b> Preparation</a></li>
<li class="chapter" data-level="2" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>2</b> Data Structures</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-structures.html"><a href="data-structures.html#vectors"><i class="fa fa-check"></i><b>2.1</b> Vectors</a></li>
<li class="chapter" data-level="2.2" data-path="data-structures.html"><a href="data-structures.html#data-classes"><i class="fa fa-check"></i><b>2.2</b> Data Classes</a></li>
<li class="chapter" data-level="2.3" data-path="data-structures.html"><a href="data-structures.html#data-frames"><i class="fa fa-check"></i><b>2.3</b> Data Frames</a></li>
<li class="chapter" data-level="2.4" data-path="data-structures.html"><a href="data-structures.html#tidy-data"><i class="fa fa-check"></i><b>2.4</b> Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="read-external-data-files.html"><a href="read-external-data-files.html"><i class="fa fa-check"></i><b>3</b> Read External Data Files</a>
<ul>
<li class="chapter" data-level="3.1" data-path="read-external-data-files.html"><a href="read-external-data-files.html#entering-data"><i class="fa fa-check"></i><b>3.1</b> Entering Data</a></li>
<li class="chapter" data-level="3.2" data-path="read-external-data-files.html"><a href="read-external-data-files.html#saving-the-external-file"><i class="fa fa-check"></i><b>3.2</b> Saving the External File</a></li>
<li class="chapter" data-level="3.3" data-path="read-external-data-files.html"><a href="read-external-data-files.html#reading-the-external-file"><i class="fa fa-check"></i><b>3.3</b> Reading the External File</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>4</b> Relational Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="relational-data.html"><a href="relational-data.html#join-concepts"><i class="fa fa-check"></i><b>4.1</b> Join Concepts</a></li>
<li class="chapter" data-level="4.2" data-path="relational-data.html"><a href="relational-data.html#joins-in-r"><i class="fa fa-check"></i><b>4.2</b> Joins in R</a></li>
<li class="chapter" data-level="4.3" data-path="relational-data.html"><a href="relational-data.html#examples-with-context"><i class="fa fa-check"></i><b>4.3</b> Examples With Context</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pivot.html"><a href="pivot.html"><i class="fa fa-check"></i><b>5</b> Pivot</a>
<ul>
<li class="chapter" data-level="5.1" data-path="pivot.html"><a href="pivot.html#data-formats"><i class="fa fa-check"></i><b>5.1</b> Data Formats</a></li>
<li class="chapter" data-level="5.2" data-path="pivot.html"><a href="pivot.html#pivoting-concepts"><i class="fa fa-check"></i><b>5.2</b> Pivoting Concepts</a></li>
<li class="chapter" data-level="5.3" data-path="pivot.html"><a href="pivot.html#pivoting-in-r"><i class="fa fa-check"></i><b>5.3</b> Pivoting in R</a></li>
<li class="chapter" data-level="5.4" data-path="pivot.html"><a href="pivot.html#pivoting-examples"><i class="fa fa-check"></i><b>5.4</b> Examples with Context</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="wrangle-columns.html"><a href="wrangle-columns.html"><i class="fa fa-check"></i><b>6</b> Wrangle Columns</a>
<ul>
<li class="chapter" data-level="6.1" data-path="wrangle-columns.html"><a href="wrangle-columns.html#dplyr-verbs"><i class="fa fa-check"></i><b>6.1</b> <code>dplyr</code> verbs</a></li>
<li class="chapter" data-level="6.2" data-path="wrangle-columns.html"><a href="wrangle-columns.html#pipe"><i class="fa fa-check"></i><b>6.2</b> Pipe</a></li>
<li class="chapter" data-level="6.3" data-path="wrangle-columns.html"><a href="wrangle-columns.html#selecting-variables"><i class="fa fa-check"></i><b>6.3</b> Selecting Variables</a></li>
<li class="chapter" data-level="6.4" data-path="wrangle-columns.html"><a href="wrangle-columns.html#moving-variables"><i class="fa fa-check"></i><b>6.4</b> Moving Variables</a></li>
<li class="chapter" data-level="6.5" data-path="wrangle-columns.html"><a href="wrangle-columns.html#renaming-variables"><i class="fa fa-check"></i><b>6.5</b> Renaming Variables</a></li>
<li class="chapter" data-level="6.6" data-path="wrangle-columns.html"><a href="wrangle-columns.html#adding-variables"><i class="fa fa-check"></i><b>6.6</b> Adding Variables</a></li>
<li class="chapter" data-level="6.7" data-path="wrangle-columns.html"><a href="wrangle-columns.html#columns-examples"><i class="fa fa-check"></i><b>6.7</b> Examples in Context</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="wrangle-rows.html"><a href="wrangle-rows.html"><i class="fa fa-check"></i><b>7</b> Wrangle Rows</a>
<ul>
<li class="chapter" data-level="7.1" data-path="wrangle-rows.html"><a href="wrangle-rows.html#filtering-rows"><i class="fa fa-check"></i><b>7.1</b> Filtering Rows</a></li>
<li class="chapter" data-level="7.2" data-path="wrangle-rows.html"><a href="wrangle-rows.html#arranging-rows"><i class="fa fa-check"></i><b>7.2</b> Arranging Rows</a></li>
<li class="chapter" data-level="7.3" data-path="wrangle-rows.html"><a href="wrangle-rows.html#appending-rows"><i class="fa fa-check"></i><b>7.3</b> Appending Rows</a></li>
<li class="chapter" data-level="7.4" data-path="wrangle-rows.html"><a href="wrangle-rows.html#examples-in-context"><i class="fa fa-check"></i><b>7.4</b> Examples in Context</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="groupings.html"><a href="groupings.html"><i class="fa fa-check"></i><b>8</b> Groupings</a>
<ul>
<li class="chapter" data-level="8.1" data-path="groupings.html"><a href="groupings.html#declaring-groupings"><i class="fa fa-check"></i><b>8.1</b> Declaring Groupings</a></li>
<li class="chapter" data-level="8.2" data-path="groupings.html"><a href="groupings.html#summarizing-by-groups"><i class="fa fa-check"></i><b>8.2</b> Summarizing by Groups</a></li>
<li class="chapter" data-level="8.3" data-path="groupings.html"><a href="groupings.html#wrangling-by-group"><i class="fa fa-check"></i><b>8.3</b> Wrangling by Group</a></li>
<li class="chapter" data-level="8.4" data-path="groupings.html"><a href="groupings.html#ungrouping"><i class="fa fa-check"></i><b>8.4</b> Ungrouping</a></li>
<li class="chapter" data-level="8.5" data-path="groupings.html"><a href="groupings.html#examples-in-context-1"><i class="fa fa-check"></i><b>8.5</b> Examples in Context</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>9</b> Dates and Times</a>
<ul>
<li class="chapter" data-level="9.1" data-path="dates-and-times.html"><a href="dates-and-times.html#obtaining-dates-data"><i class="fa fa-check"></i><b>9.1</b> Obtaining Dates Data</a></li>
<li class="chapter" data-level="9.2" data-path="dates-and-times.html"><a href="dates-and-times.html#extracting-date-components"><i class="fa fa-check"></i><b>9.2</b> Extracting Date Components</a></li>
<li class="chapter" data-level="9.3" data-path="dates-and-times.html"><a href="dates-and-times.html#calculations-with-dates"><i class="fa fa-check"></i><b>9.3</b> Calculations with Dates</a></li>
<li class="chapter" data-level="9.4" data-path="dates-and-times.html"><a href="dates-and-times.html#obtaining-time-data"><i class="fa fa-check"></i><b>9.4</b> Obtaining Time Data</a></li>
<li class="chapter" data-level="9.5" data-path="dates-and-times.html"><a href="dates-and-times.html#extracting-time-components"><i class="fa fa-check"></i><b>9.5</b> Extracting Time Components</a></li>
<li class="chapter" data-level="9.6" data-path="dates-and-times.html"><a href="dates-and-times.html#calculations-with-date-times"><i class="fa fa-check"></i><b>9.6</b> Calculations with Date-Times</a></li>
<li class="chapter" data-level="9.7" data-path="dates-and-times.html"><a href="dates-and-times.html#examples-in-context-2"><i class="fa fa-check"></i><b>9.7</b> Examples in Context</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>10</b> Factors</a>
<ul>
<li class="chapter" data-level="10.1" data-path="factors.html"><a href="factors.html#creating-factors"><i class="fa fa-check"></i><b>10.1</b> Creating Factors</a></li>
<li class="chapter" data-level="10.2" data-path="factors.html"><a href="factors.html#changing-factor-order"><i class="fa fa-check"></i><b>10.2</b> Changing Factor Order</a></li>
<li class="chapter" data-level="10.3" data-path="factors.html"><a href="factors.html#changing-factor-levels"><i class="fa fa-check"></i><b>10.3</b> Changing Factor Levels</a></li>
<li class="chapter" data-level="10.4" data-path="factors.html"><a href="factors.html#examples-in-context-3"><i class="fa fa-check"></i><b>10.4</b> Examples in Context</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>11</b> Strings</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /></a></li>
<li><a href="https://bookdown.org" target="_blank">Built with Bookdown + RStudio</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Readings for MTH250 - Data Wrangling</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="factors" class="section level1" number="10">
<h1><span class="header-section-number">Module 10</span> Factors</h1>
<p>Factors are a special case of character variables in R. Factors are primarily used for categorical data, especially if summaries of that data are to be displayed in other than alphabetical order. For example, a simple count of the number of observations in each <code>loc</code> of the <code>bears</code> data frame introduced in Section <a href="read-external-data-files.html#csv-files">3.3.1</a> shows that the categories of the character variable are displayed alphabetically by default.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb439-1"><a href="factors.html#cb439-1" aria-hidden="true" tabindex="-1"></a>bears <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">file.path</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;Bears.csv&quot;</span>))</span>
<span id="cb439-2"><a href="factors.html#cb439-2" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb439-3"><a href="factors.html#cb439-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(loc) <span class="sc">%&gt;%</span></span>
<span id="cb439-4"><a href="factors.html#cb439-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())</span>
<span id="cb439-5"><a href="factors.html#cb439-5" aria-hidden="true" tabindex="-1"></a>tmp</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 3 x 2
#R&gt;     loc          n
#R&gt;     &lt;chr&gt;    &lt;int&gt;
#R&gt;   1 Ashland      2
#R&gt;   2 Bayfield     3
#R&gt;   3 Douglas      3</code></pre>
<p>To display these results in other than alphabetical order will require the use of factors, which will be illustrated in this module.</p>
<p>Factors have a long and, for some, dubious history in R. The <code>forcats</code> package was developed to aid working with factors in R. While it is not critical to understanding the methods of this module, the <a href="http://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/">stringsAsFactors: An unauthorized biography</a> and <a href="http://notstatschat.tumblr.com/post/124987394001/stringsasfactors-sigh">stringsAsFactors = &lt;sigh&gt;</a> are interesting reads about how unforseen issues can arise when using factors. Many of these issues are addressed when using <code>forcats</code>, which is loaded with <code>tidyverse</code>.</p>
<p> </p>
<div id="creating-factors" class="section level2" number="10.1">
<h2><span class="header-section-number">10.1</span> Creating Factors</h2>
<p>A variable is converted to a factor class by including that variable in <code>factor()</code>. The code below creates a new data frame where <code>loc</code> is now a factor, as indicated by <code>&lt;fct&gt;</code> below <code>loc</code> when the tibble is printed.</p>
<div class="sourceCode" id="cb441"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb441-1"><a href="factors.html#cb441-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb441-2"><a href="factors.html#cb441-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">factor</span>(loc))</span>
<span id="cb441-3"><a href="factors.html#cb441-3" aria-hidden="true" tabindex="-1"></a>tmp</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 8 x 3
#R&gt;     length.cm weight.kg loc     
#R&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;   
#R&gt;   1      139        110 Bayfield
#R&gt;   2      120.        60 Bayfield
#R&gt;   3      149         85 Bayfield
#R&gt;   4      141        100 Ashland 
#R&gt;   5      141         95 Ashland 
#R&gt;   6      150         85 Douglas 
#R&gt;   7      130.       105 Douglas 
#R&gt;   8      150        110 Douglas</code></pre>
<p>Nothing is changed when the data are displayed as above. However, behind-the-scenes the factor variable consists of numerical codes that are mapped to levels (i.e., the categories) of the factor variable. The order his is still alphabetical because the order of the levels was not specifically controlled when creating the factor variable. Thus, behind-the-scenes “1” is mapped to “Ashland,” “2” to “Bayfield,” and “3” to “Douglas.” This mapping is shown below.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb443-1"><a href="factors.html#cb443-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">loc_nums=</span><span class="fu">as.numeric</span>(loc))</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 8 x 4
#R&gt;     length.cm weight.kg loc      loc_nums
#R&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;       &lt;dbl&gt;
#R&gt;   1      139        110 Bayfield        2
#R&gt;   2      120.        60 Bayfield        2
#R&gt;   3      149         85 Bayfield        2
#R&gt;   4      141        100 Ashland         1
#R&gt;   5      141         95 Ashland         1
#R&gt;   6      150         85 Douglas         3
#R&gt;   7      130.       105 Douglas         3
#R&gt;   8      150        110 Douglas         3</code></pre>
<p>Suppose, however, that we prefer that the levels of the <code>loc</code> variable be ordered from West to East, as in Douglas than Bayfield and then Ashland. The specific order of the levels can be set by supplying the ordered levels in a vector given to <code>levels=</code> within <code>factor()</code>.</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb445-1"><a href="factors.html#cb445-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb445-2"><a href="factors.html#cb445-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">factor</span>(loc,<span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Douglas&quot;</span>,<span class="st">&quot;Bayfield&quot;</span>,<span class="st">&quot;Ashland&quot;</span>)))</span>
<span id="cb445-3"><a href="factors.html#cb445-3" aria-hidden="true" tabindex="-1"></a>tmp</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 8 x 3
#R&gt;     length.cm weight.kg loc     
#R&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;   
#R&gt;   1      139        110 Bayfield
#R&gt;   2      120.        60 Bayfield
#R&gt;   3      149         85 Bayfield
#R&gt;   4      141        100 Ashland 
#R&gt;   5      141         95 Ashland 
#R&gt;   6      150         85 Douglas 
#R&gt;   7      130.       105 Douglas 
#R&gt;   8      150        110 Douglas</code></pre>
<p>Again, the data are not fundamentally altered, but the codes underlying the factor variables are.<a href="#fn37" class="footnote-ref" id="fnref37"><sup>37</sup></a></p>
<div class="sourceCode" id="cb447"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb447-1"><a href="factors.html#cb447-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">loc_nums=</span><span class="fu">as.numeric</span>(loc))</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 8 x 4
#R&gt;     length.cm weight.kg loc      loc_nums
#R&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;       &lt;dbl&gt;
#R&gt;   1      139        110 Bayfield        2
#R&gt;   2      120.        60 Bayfield        2
#R&gt;   3      149         85 Bayfield        2
#R&gt;   4      141        100 Ashland         3
#R&gt;   5      141         95 Ashland         3
#R&gt;   6      150         85 Douglas         1
#R&gt;   7      130.       105 Douglas         1
#R&gt;   8      150        110 Douglas         1</code></pre>
<p>When setting the levels of a factor variable make sure that all levels are spelled exactly as they are in the original variable. For example, see the major problem created below when a level is erroneously set (i.e., “bayfield” is not capitalized).</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb449-1"><a href="factors.html#cb449-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb449-2"><a href="factors.html#cb449-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">factor</span>(loc,<span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Douglas&quot;</span>,<span class="st">&quot;bayfield&quot;</span>,<span class="st">&quot;Ashland&quot;</span>)))</span>
<span id="cb449-3"><a href="factors.html#cb449-3" aria-hidden="true" tabindex="-1"></a>tmp</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 8 x 3
#R&gt;     length.cm weight.kg loc    
#R&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;  
#R&gt;   1      139        110 &lt;NA&gt;   
#R&gt;   2      120.        60 &lt;NA&gt;   
#R&gt;   3      149         85 &lt;NA&gt;   
#R&gt;   4      141        100 Ashland
#R&gt;   5      141         95 Ashland
#R&gt;   6      150         85 Douglas
#R&gt;   7      130.       105 Douglas
#R&gt;   8      150        110 Douglas</code></pre>
<p>Additionally, make sure that you include all possible levels when creating the levels.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb451-1"><a href="factors.html#cb451-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb451-2"><a href="factors.html#cb451-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">factor</span>(loc,<span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Douglas&quot;</span>,<span class="st">&quot;Ashland&quot;</span>)))</span>
<span id="cb451-3"><a href="factors.html#cb451-3" aria-hidden="true" tabindex="-1"></a>tmp</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 8 x 3
#R&gt;     length.cm weight.kg loc    
#R&gt;         &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;  
#R&gt;   1      139        110 &lt;NA&gt;   
#R&gt;   2      120.        60 &lt;NA&gt;   
#R&gt;   3      149         85 &lt;NA&gt;   
#R&gt;   4      141        100 Ashland
#R&gt;   5      141         95 Ashland
#R&gt;   6      150         85 Douglas
#R&gt;   7      130.       105 Douglas
#R&gt;   8      150        110 Douglas</code></pre>
<p>Given these last two issues it is important to understand what levels exist within a variable. If the variable is a character class (and not yet a factor) then use <code>unique()</code> to see the list of levels.</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb453-1"><a href="factors.html#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(bears<span class="sc">$</span>loc)</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   [1] &quot;Bayfield&quot; &quot;Ashland&quot;  &quot;Douglas&quot;</code></pre>
<p>However, if the variable is a factor class already then use <code>levels()</code> to see the list of levels along with their order.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb455-1"><a href="factors.html#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(tmp<span class="sc">$</span>loc)</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   [1] &quot;Douglas&quot; &quot;Ashland&quot;</code></pre>
<p> </p>
</div>
<div id="changing-factor-order" class="section level2" number="10.2">
<h2><span class="header-section-number">10.2</span> Changing Factor Order</h2>
<p>Factor levels can be manually reordered using <code>levels=</code> as shown in the previous section. However, <code>forcats</code> provides functions that provide other methods for reordering levels.</p>
<p>The <code>fct_reorder()</code> function can reorder levels based on the value of another variable. This function takes the factor variable name as the first argument and the name of a numeric variable that contains the values for which to reorder the factor levels. Optionally a third argument called <code>f</code> can be included that calculates a summary value of the numeric variable when multiple values of the variable exist.<a href="#fn38" class="footnote-ref" id="fnref38"><sup>38</sup></a></p>
<p>For example, the code below orders the <code>loc</code> levels based on the median length of the bears.</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb457-1"><a href="factors.html#cb457-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb457-2"><a href="factors.html#cb457-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">fct_reorder</span>(loc,length.cm))</span>
<span id="cb457-3"><a href="factors.html#cb457-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(tmp<span class="sc">$</span>loc)</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   [1] &quot;Bayfield&quot; &quot;Ashland&quot;  &quot;Douglas&quot;</code></pre>
<div class="sourceCode" id="cb459"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb459-1"><a href="factors.html#cb459-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="sc">%&gt;%</span></span>
<span id="cb459-2"><a href="factors.html#cb459-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(loc) <span class="sc">%&gt;%</span></span>
<span id="cb459-3"><a href="factors.html#cb459-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb459-4"><a href="factors.html#cb459-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">mdn=</span><span class="fu">median</span>(length.cm))</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 3 x 3
#R&gt;     loc          n   mdn
#R&gt;     &lt;fct&gt;    &lt;int&gt; &lt;dbl&gt;
#R&gt;   1 Bayfield     3   139
#R&gt;   2 Ashland      2   141
#R&gt;   3 Douglas      3   150</code></pre>
<p>Alternatively, the code below orders the <code>loc</code> levels by the minimum length of the bears.</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb461-1"><a href="factors.html#cb461-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb461-2"><a href="factors.html#cb461-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">fct_reorder</span>(loc,length.cm,<span class="at">.fun=</span>min))</span>
<span id="cb461-3"><a href="factors.html#cb461-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(tmp<span class="sc">$</span>loc)</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   [1] &quot;Bayfield&quot; &quot;Douglas&quot;  &quot;Ashland&quot;</code></pre>
<div class="sourceCode" id="cb463"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb463-1"><a href="factors.html#cb463-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="sc">%&gt;%</span></span>
<span id="cb463-2"><a href="factors.html#cb463-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(loc) <span class="sc">%&gt;%</span></span>
<span id="cb463-3"><a href="factors.html#cb463-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb463-4"><a href="factors.html#cb463-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">min=</span><span class="fu">min</span>(length.cm))</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 3 x 3
#R&gt;     loc          n   min
#R&gt;     &lt;fct&gt;    &lt;int&gt; &lt;dbl&gt;
#R&gt;   1 Bayfield     3  120.
#R&gt;   2 Douglas      3  130.
#R&gt;   3 Ashland      2  141</code></pre>
<p> </p>
<p>The <code>fct_relevel()</code> function can be used to move levels to the beginning of the order of levels. The first argument must be the name of the factor variable and subsequent arguments are the levels to move to the “beginning of the line.” For example, the following code moves “Bayfield” to the beginning of the order.</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb465-1"><a href="factors.html#cb465-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb465-2"><a href="factors.html#cb465-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">fct_relevel</span>(loc,<span class="st">&quot;Bayfield&quot;</span>))</span>
<span id="cb465-3"><a href="factors.html#cb465-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(tmp<span class="sc">$</span>loc)</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   [1] &quot;Bayfield&quot; &quot;Ashland&quot;  &quot;Douglas&quot;</code></pre>
<p>Alternatively, both “Bayfield” and “Douglas” were moved to the beginning below</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb467-1"><a href="factors.html#cb467-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb467-2"><a href="factors.html#cb467-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">fct_relevel</span>(loc,<span class="st">&quot;Bayfield&quot;</span>,<span class="st">&quot;Douglas&quot;</span>))</span>
<span id="cb467-3"><a href="factors.html#cb467-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(tmp<span class="sc">$</span>loc)</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   [1] &quot;Bayfield&quot; &quot;Douglas&quot;  &quot;Ashland&quot;</code></pre>
<p> </p>
<p>The <code>fct_rev()</code> function simply reverses the order of the levels for the given factor variable.</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb469-1"><a href="factors.html#cb469-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb469-2"><a href="factors.html#cb469-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">fct_rev</span>(loc))</span>
<span id="cb469-3"><a href="factors.html#cb469-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(tmp<span class="sc">$</span>loc)</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   [1] &quot;Douglas&quot;  &quot;Bayfield&quot; &quot;Ashland&quot;</code></pre>
<p>The <code>fct_rev()</code> function can be used with <code>fct_reorder()</code> to change the order from ascending to descending order. For example, the code below show the factor levels in ascending order of the mininum length.</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb471-1"><a href="factors.html#cb471-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb471-2"><a href="factors.html#cb471-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">fct_reorder</span>(loc,length.cm,<span class="at">.fun=</span>min),</span>
<span id="cb471-3"><a href="factors.html#cb471-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">loc=</span><span class="fu">fct_rev</span>(loc))</span>
<span id="cb471-4"><a href="factors.html#cb471-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb471-5"><a href="factors.html#cb471-5" aria-hidden="true" tabindex="-1"></a>tmp <span class="sc">%&gt;%</span></span>
<span id="cb471-6"><a href="factors.html#cb471-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(loc) <span class="sc">%&gt;%</span></span>
<span id="cb471-7"><a href="factors.html#cb471-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb471-8"><a href="factors.html#cb471-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">min=</span><span class="fu">min</span>(length.cm))</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 3 x 3
#R&gt;     loc          n   min
#R&gt;     &lt;fct&gt;    &lt;int&gt; &lt;dbl&gt;
#R&gt;   1 Ashland      2  141 
#R&gt;   2 Douglas      3  130.
#R&gt;   3 Bayfield     3  120.</code></pre>
<p> </p>
<p>The <code>fct_infreq()</code> function is used to order the levels by <strong>de</strong>creasing frequency of their occurrence.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb473-1"><a href="factors.html#cb473-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb473-2"><a href="factors.html#cb473-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">fct_infreq</span>(loc))</span>
<span id="cb473-3"><a href="factors.html#cb473-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb473-4"><a href="factors.html#cb473-4" aria-hidden="true" tabindex="-1"></a>tmp <span class="sc">%&gt;%</span></span>
<span id="cb473-5"><a href="factors.html#cb473-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(loc) <span class="sc">%&gt;%</span></span>
<span id="cb473-6"><a href="factors.html#cb473-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 3 x 2
#R&gt;     loc          n
#R&gt;     &lt;fct&gt;    &lt;int&gt;
#R&gt;   1 Bayfield     3
#R&gt;   2 Douglas      3
#R&gt;   3 Ashland      2</code></pre>
<p>Of course, using <code>fct_rev()</code> with <code>fct_infreq()</code> would order the levels ascending frequency of occurrence.</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb475-1"><a href="factors.html#cb475-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> bears <span class="sc">%&gt;%</span></span>
<span id="cb475-2"><a href="factors.html#cb475-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">loc=</span><span class="fu">fct_rev</span>(<span class="fu">fct_infreq</span>(loc)))</span>
<span id="cb475-3"><a href="factors.html#cb475-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb475-4"><a href="factors.html#cb475-4" aria-hidden="true" tabindex="-1"></a>tmp <span class="sc">%&gt;%</span></span>
<span id="cb475-5"><a href="factors.html#cb475-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(loc) <span class="sc">%&gt;%</span></span>
<span id="cb475-6"><a href="factors.html#cb475-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 3 x 2
#R&gt;     loc          n
#R&gt;     &lt;fct&gt;    &lt;int&gt;
#R&gt;   1 Ashland      2
#R&gt;   2 Douglas      3
#R&gt;   3 Bayfield     3</code></pre>
</div>
<div id="changing-factor-levels" class="section level2" number="10.3">
<h2><span class="header-section-number">10.3</span> Changing Factor Levels</h2>
<p>In some instances it may be beneficial to change the names of the levels or to collapse or lump levels together. Methods for performing these changes are demonstrated in this section using data on the density and basal area of tree species located on plots in the Apostle Islands that were designated as “Balsam Fir” plots. These data were extracted from <a href="https://irma.nps.gov/DataStore/DownloadFile/454366">Sanders and Grochowski (2012)</a> and are stored in <a href="https://github.com/droglenc/BookWrangling/raw/main/data/APIS_FirPlots.xlsx">APIS_FirPlots.xlsx</a>. These data are read in and briefly summarized below.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb477-1"><a href="factors.html#cb477-1" aria-hidden="true" tabindex="-1"></a>aip <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="fu">file.path</span>(<span class="st">&quot;data&quot;</span>,<span class="st">&quot;APIS_FirPlots.xlsx&quot;</span>))</span>
<span id="cb477-2"><a href="factors.html#cb477-2" aria-hidden="true" tabindex="-1"></a>aip</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 26 x 4
#R&gt;       plot species                 density basal_area
#R&gt;      &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt;      &lt;dbl&gt;
#R&gt;    1  1011 Acer rubrum                11.1        0.4
#R&gt;    2  1011 Betula alleghaniensis     156.         1.7
#R&gt;    3  1011 Betula papyrifera          44.4        0.7
#R&gt;    4  1011 Sorbus decora              22.2        0.2
#R&gt;    5  1011 unknown tree - hardwood    11.1        0.6
#R&gt;    6  1011 Abies balsamea            878.         2.5
#R&gt;    7  1011 unknown tree - softwood   122.         1.2
#R&gt;    8  1031 Acer saccharum             55.6        0.1
#R&gt;    9  1031 Acer sp.                   44.4        0.3
#R&gt;   10  1031 Betula papyrifera          33.3        1.5
#R&gt;   # ... with 16 more rows</code></pre>
<div class="sourceCode" id="cb479"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb479-1"><a href="factors.html#cb479-1" aria-hidden="true" tabindex="-1"></a>aip_sum1 <span class="ot">&lt;-</span> aip <span class="sc">%&gt;%</span></span>
<span id="cb479-2"><a href="factors.html#cb479-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb479-3"><a href="factors.html#cb479-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb479-4"><a href="factors.html#cb479-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">ttl_density=</span><span class="fu">sum</span>(density),</span>
<span id="cb479-5"><a href="factors.html#cb479-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">ttl_barea=</span><span class="fu">sum</span>(basal_area))</span>
<span id="cb479-6"><a href="factors.html#cb479-6" aria-hidden="true" tabindex="-1"></a>aip_sum1</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 14 x 4
#R&gt;      species                     n ttl_density ttl_barea
#R&gt;      &lt;chr&gt;                   &lt;int&gt;       &lt;dbl&gt;     &lt;dbl&gt;
#R&gt;    1 Abies balsamea              4      1000         2.8
#R&gt;    2 Acer rubrum                 1        11.1       0.4
#R&gt;    3 Acer saccharum              3        77.8       0.2
#R&gt;    4 Acer sp.                    1        44.4       0.3
#R&gt;    5 Acer spicatum               1        11.1       0  
#R&gt;    6 Betula alleghaniensis       3       178.        2.3
#R&gt;    7 Betula papyrifera           2        77.7       2.2
#R&gt;    8 Betula sp.                  1        11.1       0.3
#R&gt;    9 Populus tremuloides         1        22.2       1.5
#R&gt;   10 Quercus rubra               1        11.1       0  
#R&gt;   11 Sorbus decora               1        22.2       0.2
#R&gt;   12 Thuja occidentalis          1        11.1       0.7
#R&gt;   13 unknown tree - hardwood     4       111         4.3
#R&gt;   14 unknown tree - softwood     2       144.        1.2</code></pre>
<div class="sourceCode" id="cb481"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb481-1"><a href="factors.html#cb481-1" aria-hidden="true" tabindex="-1"></a>aip <span class="sc">%&lt;&gt;%</span></span>
<span id="cb481-2"><a href="factors.html#cb481-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species2=</span><span class="fu">fct_collapse</span>(species,</span>
<span id="cb481-3"><a href="factors.html#cb481-3" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;Acer sp.&quot;</span><span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Acer rubrum&quot;</span>,<span class="st">&quot;Acer saccharum&quot;</span>,</span>
<span id="cb481-4"><a href="factors.html#cb481-4" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">&quot;Acer sp.&quot;</span>,<span class="st">&quot;Acer spicatum&quot;</span>),</span>
<span id="cb481-5"><a href="factors.html#cb481-5" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;Betula sp.&quot;</span><span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;Betula alleghaniensis&quot;</span>,</span>
<span id="cb481-6"><a href="factors.html#cb481-6" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;Betula papyrifera&quot;</span>,</span>
<span id="cb481-7"><a href="factors.html#cb481-7" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">&quot;Betula sp.&quot;</span>),</span>
<span id="cb481-8"><a href="factors.html#cb481-8" aria-hidden="true" tabindex="-1"></a>                               <span class="st">&quot;Unknown&quot;</span><span class="ot">=</span><span class="fu">c</span>(<span class="st">&quot;unknown tree - hardwood&quot;</span>,</span>
<span id="cb481-9"><a href="factors.html#cb481-9" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">&quot;unknown tree - softwood&quot;</span>)),</span>
<span id="cb481-10"><a href="factors.html#cb481-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">species2=</span><span class="fu">fct_rev</span>(<span class="fu">fct_reorder</span>(species2,density,<span class="at">.fun=</span>sum)))</span>
<span id="cb481-11"><a href="factors.html#cb481-11" aria-hidden="true" tabindex="-1"></a>aip</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 26 x 5
#R&gt;       plot species                 density basal_area species2      
#R&gt;      &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt;      &lt;dbl&gt; &lt;fct&gt;         
#R&gt;    1  1011 Acer rubrum                11.1        0.4 Acer sp.      
#R&gt;    2  1011 Betula alleghaniensis     156.         1.7 Betula sp.    
#R&gt;    3  1011 Betula papyrifera          44.4        0.7 Betula sp.    
#R&gt;    4  1011 Sorbus decora              22.2        0.2 Sorbus decora 
#R&gt;    5  1011 unknown tree - hardwood    11.1        0.6 Unknown       
#R&gt;    6  1011 Abies balsamea            878.         2.5 Abies balsamea
#R&gt;    7  1011 unknown tree - softwood   122.         1.2 Unknown       
#R&gt;    8  1031 Acer saccharum             55.6        0.1 Acer sp.      
#R&gt;    9  1031 Acer sp.                   44.4        0.3 Acer sp.      
#R&gt;   10  1031 Betula papyrifera          33.3        1.5 Betula sp.    
#R&gt;   # ... with 16 more rows</code></pre>
<div class="sourceCode" id="cb483"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb483-1"><a href="factors.html#cb483-1" aria-hidden="true" tabindex="-1"></a>aip_sum2 <span class="ot">&lt;-</span> aip <span class="sc">%&gt;%</span></span>
<span id="cb483-2"><a href="factors.html#cb483-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species2) <span class="sc">%&gt;%</span></span>
<span id="cb483-3"><a href="factors.html#cb483-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb483-4"><a href="factors.html#cb483-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">ttl_density=</span><span class="fu">sum</span>(density),</span>
<span id="cb483-5"><a href="factors.html#cb483-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">ttl_barea=</span><span class="fu">sum</span>(basal_area))</span>
<span id="cb483-6"><a href="factors.html#cb483-6" aria-hidden="true" tabindex="-1"></a>aip_sum2</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 8 x 4
#R&gt;     species2                n ttl_density ttl_barea
#R&gt;     &lt;fct&gt;               &lt;int&gt;       &lt;dbl&gt;     &lt;dbl&gt;
#R&gt;   1 Abies balsamea          4      1000         2.8
#R&gt;   2 Betula sp.              6       267.        4.8
#R&gt;   3 Unknown                 6       255.        5.5
#R&gt;   4 Acer sp.                6       144.        0.9
#R&gt;   5 Sorbus decora           1        22.2       0.2
#R&gt;   6 Populus tremuloides     1        22.2       1.5
#R&gt;   7 Thuja occidentalis      1        11.1       0.7
#R&gt;   8 Quercus rubra           1        11.1       0</code></pre>
<div class="sourceCode" id="cb485"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb485-1"><a href="factors.html#cb485-1" aria-hidden="true" tabindex="-1"></a>aip <span class="ot">&lt;-</span> aip <span class="sc">%&gt;%</span></span>
<span id="cb485-2"><a href="factors.html#cb485-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species3=</span><span class="fu">fct_lump</span>(species2,<span class="at">n=</span><span class="dv">4</span>))</span>
<span id="cb485-3"><a href="factors.html#cb485-3" aria-hidden="true" tabindex="-1"></a>aip</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 26 x 6
#R&gt;       plot species                 density basal_area species2       species3     
#R&gt;      &lt;dbl&gt; &lt;chr&gt;                     &lt;dbl&gt;      &lt;dbl&gt; &lt;fct&gt;          &lt;fct&gt;        
#R&gt;    1  1011 Acer rubrum                11.1        0.4 Acer sp.       Acer sp.     
#R&gt;    2  1011 Betula alleghaniensis     156.         1.7 Betula sp.     Betula sp.   
#R&gt;    3  1011 Betula papyrifera          44.4        0.7 Betula sp.     Betula sp.   
#R&gt;    4  1011 Sorbus decora              22.2        0.2 Sorbus decora  Other        
#R&gt;    5  1011 unknown tree - hardwood    11.1        0.6 Unknown        Unknown      
#R&gt;    6  1011 Abies balsamea            878.         2.5 Abies balsamea Abies balsam~
#R&gt;    7  1011 unknown tree - softwood   122.         1.2 Unknown        Unknown      
#R&gt;    8  1031 Acer saccharum             55.6        0.1 Acer sp.       Acer sp.     
#R&gt;    9  1031 Acer sp.                   44.4        0.3 Acer sp.       Acer sp.     
#R&gt;   10  1031 Betula papyrifera          33.3        1.5 Betula sp.     Betula sp.   
#R&gt;   # ... with 16 more rows</code></pre>
<div class="sourceCode" id="cb487"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb487-1"><a href="factors.html#cb487-1" aria-hidden="true" tabindex="-1"></a>aip_sum3 <span class="ot">&lt;-</span> aip <span class="sc">%&gt;%</span></span>
<span id="cb487-2"><a href="factors.html#cb487-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species3) <span class="sc">%&gt;%</span></span>
<span id="cb487-3"><a href="factors.html#cb487-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb487-4"><a href="factors.html#cb487-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">ttl_density=</span><span class="fu">sum</span>(density),</span>
<span id="cb487-5"><a href="factors.html#cb487-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">ttl_barea=</span><span class="fu">sum</span>(basal_area))</span>
<span id="cb487-6"><a href="factors.html#cb487-6" aria-hidden="true" tabindex="-1"></a>aip_sum3</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 5 x 4
#R&gt;     species3           n ttl_density ttl_barea
#R&gt;     &lt;fct&gt;          &lt;int&gt;       &lt;dbl&gt;     &lt;dbl&gt;
#R&gt;   1 Abies balsamea     4      1000         2.8
#R&gt;   2 Betula sp.         6       267.        4.8
#R&gt;   3 Unknown            6       255.        5.5
#R&gt;   4 Acer sp.           6       144.        0.9
#R&gt;   5 Other              4        66.6       2.4</code></pre>
<div class="sourceCode" id="cb489"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb489-1"><a href="factors.html#cb489-1" aria-hidden="true" tabindex="-1"></a>aip <span class="sc">%&lt;&gt;%</span></span>
<span id="cb489-2"><a href="factors.html#cb489-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species4=</span><span class="fu">fct_recode</span>(species3,</span>
<span id="cb489-3"><a href="factors.html#cb489-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Maple&quot;</span> <span class="ot">=</span> <span class="st">&quot;Acer sp.&quot;</span>,</span>
<span id="cb489-4"><a href="factors.html#cb489-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Birch&quot;</span> <span class="ot">=</span> <span class="st">&quot;Betula sp.&quot;</span>,</span>
<span id="cb489-5"><a href="factors.html#cb489-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&quot;Balsam Fir&quot;</span> <span class="ot">=</span> <span class="st">&quot;Abies balsamea&quot;</span>))</span>
<span id="cb489-6"><a href="factors.html#cb489-6" aria-hidden="true" tabindex="-1"></a>aip</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 26 x 7
#R&gt;       plot species           density basal_area species2     species3    species4 
#R&gt;      &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;      &lt;dbl&gt; &lt;fct&gt;        &lt;fct&gt;       &lt;fct&gt;    
#R&gt;    1  1011 Acer rubrum          11.1        0.4 Acer sp.     Acer sp.    Maple    
#R&gt;    2  1011 Betula alleghani~   156.         1.7 Betula sp.   Betula sp.  Birch    
#R&gt;    3  1011 Betula papyrifera    44.4        0.7 Betula sp.   Betula sp.  Birch    
#R&gt;    4  1011 Sorbus decora        22.2        0.2 Sorbus deco~ Other       Other    
#R&gt;    5  1011 unknown tree - h~    11.1        0.6 Unknown      Unknown     Unknown  
#R&gt;    6  1011 Abies balsamea      878.         2.5 Abies balsa~ Abies bals~ Balsam F~
#R&gt;    7  1011 unknown tree - s~   122.         1.2 Unknown      Unknown     Unknown  
#R&gt;    8  1031 Acer saccharum       55.6        0.1 Acer sp.     Acer sp.    Maple    
#R&gt;    9  1031 Acer sp.             44.4        0.3 Acer sp.     Acer sp.    Maple    
#R&gt;   10  1031 Betula papyrifera    33.3        1.5 Betula sp.   Betula sp.  Birch    
#R&gt;   # ... with 16 more rows</code></pre>
<div class="sourceCode" id="cb491"><pre class="sourceCode r RCODE"><code class="sourceCode r"><span id="cb491-1"><a href="factors.html#cb491-1" aria-hidden="true" tabindex="-1"></a>aip_sum4 <span class="ot">&lt;-</span> aip <span class="sc">%&gt;%</span></span>
<span id="cb491-2"><a href="factors.html#cb491-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species4) <span class="sc">%&gt;%</span></span>
<span id="cb491-3"><a href="factors.html#cb491-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n=</span><span class="fu">n</span>(),</span>
<span id="cb491-4"><a href="factors.html#cb491-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">ttl_density=</span><span class="fu">sum</span>(density),</span>
<span id="cb491-5"><a href="factors.html#cb491-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">ttl_barea=</span><span class="fu">sum</span>(basal_area))</span>
<span id="cb491-6"><a href="factors.html#cb491-6" aria-hidden="true" tabindex="-1"></a>aip_sum4</span></code></pre></div>
<pre class="ROUTPUT"><code>#R&gt;   # A tibble: 5 x 4
#R&gt;     species4       n ttl_density ttl_barea
#R&gt;     &lt;fct&gt;      &lt;int&gt;       &lt;dbl&gt;     &lt;dbl&gt;
#R&gt;   1 Balsam Fir     4      1000         2.8
#R&gt;   2 Birch          6       267.        4.8
#R&gt;   3 Unknown        6       255.        5.5
#R&gt;   4 Maple          6       144.        0.9
#R&gt;   5 Other          4        66.6       2.4</code></pre>
</div>
<div id="examples-in-context-3" class="section level2" number="10.4">
<h2><span class="header-section-number">10.4</span> Examples in Context</h2>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="37">
<li id="fn37"><p>See that “1” is now mapped to “Douglas,” “2” to “Bayfield,” and “3” to “Ashland.”<a href="factors.html#fnref37" class="footnote-back">↩︎</a></p></li>
<li id="fn38"><p>It defaults to using the median.<a href="factors.html#fnref38" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dates-and-times.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="strings.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
